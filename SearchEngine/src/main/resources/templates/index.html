<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Engine</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/foundation.min.css" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,500' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
                              <script>
  (function() {
    var cx = '015482134683120071940:4ghrbt2x4-4';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<script src="https://www.google.com/jsapi"    type="text/javascript"></script>
    <script language="Javascript" type="text/javascript">
    //<!
    google.load('search', '1');

    function OnLoad() {
      // Create a search control
      var searchControl = new google.search.SearchControl();

      // Add in a full set of searchers
      var localSearch = new google.search.LocalSearch();
      searchControl.addSearcher(localSearch);
      searchControl.addSearcher(new google.search.WebSearch());
      searchControl.addSearcher(new google.search.VideoSearch());
      searchControl.addSearcher(new google.search.BlogSearch());
      searchControl.addSearcher(new google.search.NewsSearch());
      searchControl.addSearcher(new google.search.ImageSearch());
      searchControl.addSearcher(new google.search.BookSearch());
      searchControl.addSearcher(new google.search.PatentSearch());

      // Set the Local Search center point
      localSearch.setCenterPoint("New York, NY");

      // tell the searcher to draw itself and tell it where to attach
      searchControl.draw(document.getElementById("searchcontrol"));

      // execute an inital search
      searchControl.execute("");
    }
    google.setOnLoadCallback(OnLoad);

    //]]>
    </script>
    <script>
    $(document).ready(function(){
    $("#textSearch").keyup(function(e){
    	if(e.keyCode==13)
    		{
    		$("#title").show();
    		}
    });
    		
      });
    </script>
</head>

<style>
	html, body {
    width: 100%;
    height: 100%;
    margin: 0px;
    padding: 0px;
    overflow-x: hidden;
}
body {
    color: #242628;
    font-family: 'Roboto', sans-serif;
}
.main {
    margin: 1vh auto;
}
.search {
    background-color: #FFF;
    font-family: 'Inconsolata', sans-serif;
    border-bottom: 1px solid #242628;
}
#textSearch {
    border: 0;
    margin: 0;
    font-size: 2.4em;
    font-weight: bold;
    height: auto;
    box-shadow: none;
}
#textSearch:focus {
    background-color: #FFF;
}
.searchbox{
	height: 60px;
	background-color: white;
}

.postBox{
    border-bottom: #d0e2ea 1px dashed;
    margin-top:0.5rem;
    padding-bottom: 10px;

}

.resultContainer .resultContainer1 .resultContainer2{
    margin-top: 1rem;
    padding-bottom: 10px 10px;
    width:25%;
    
}
.rightpad{
padding-RIGHT: 150px;
font-weight:bold;
}
.title{
    font-size: 1.5rem;
    line-height: inherit;/*1.2em;*/
    letter-spacing: -1px;
    text-indent: -2px;
    font-weight: bold;
    padding-top: 0;
    margin: 0px 0px;
    border: none;
    color: #3498db;
}

.title:hover{
    color: #000;
}

.meta{
    color: #9EABB3;
    font-size: 1rem;
    margin: 0px 0px;
}

a.userEmail{
    color: inherit;
    text-decoration: none;
}

a.userEmail:hover{
    text-decoration: underline;
}

</style>

<body style="background-image:'img/images.jpg';">

	<nav class="top-bar">
<!--         <ul class="title-area"> -->
<!--             <li class="name"> -->
<!--                 <h1> -->
<!--                     <a href="#">Search Engine -->
<!--                     </a> -->
<!--                 </h1> -->
<!--             </li> -->
<!--             <li class="toggle-topbar menu-icon"> -->
<!--                 <a href="#"> -->
<!--                     <span>Menu</span> -->
<!--                 </a> -->
<!--             </li> -->
<!--         </ul> -->
    </nav>

   <input type="hidden" id="appKey" value="ZMJgaJl3wg/xYkiNOnC7kU+z901fw/q76sptaiPdVEU" />
	<div class="row main clearfix"> <img src="" style="z-index:-1">
		<div class="searchbox columns large-1 show-for-large-up">
			<img class="my img" src="img/search-128.png" alt="" />
		</div>
		 <div class="search-row">
                      <div class="search columns large-11 small-12 medium-12">
			<input type="text" id="textSearch" name="query"
				style="font-family: Monotype Corsiva;"
				placeholder="Start your Search for Electronics!" />
		</div>
                              
                                
                                <input type="hidden" value="1" id="pageNumber" />
                                <input type="hidden" value="" id="lastSearch" />
                            </div>
		
	</div>
    <br>
<!--     <div class="row clearfix"> -->
<!--       <div class="columns large-5 large-offset-1"> -->
<!--         <input type="radio" name="pagerank" value="true" checked> Page rank -->
<!--         &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; -->
<!--         <input type="radio" name="pagerank" value="false"> Index -->
<!--          &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; -->

<!--       </div> -->
    
      <div class="container" >
                <form id="siteSearchForm">
                            <div class="search-row">
                               
                                <input type="hidden" id="appKey" value="ZMJgaJl3wg/xYkiNOnC7kU+z901fw/q76sptaiPdVEU" />
                            </div>
				    <span class="row clearfix">
				    
				    <!--     <input type="radio" name="pagerank" value="true" > Page rank
				        &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
				        <input type="radio" name="pagerank" value="false" checked> Index
				         &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; -->
						
						 <div class="row container-fluid"> <div class="col-lg-6"><gcse:search> </gcse:search></div>
						 <div class="col-lg-6" style="padding: 30px"><input type="submit" value="Bing Search" class="btn"  /></div></div>
				      
				    </span>
                             
                                <input type="hidden" value="1" id="pageNumber" />
                                <input type="hidden" value="" id="lastSearch" />
                        </form>
              </div> 
              <div id="title" class="container-fluid" style="display:none;"><span class="rightpad"></span><span class="rightpad">BING RESULTS </span><span class="rightpad">
              VECTOR MODEL-PAGERANK RESULTS </span>   <span class="rightpad"> VECTOR MODEL-HITS RESULTS </span><span class="rightpad"> CLUSTERING RESULTS</span></div>       
                        <div class="row container-fluid" style="max-width:100rem;">
    <div class="col-lg-3" height="400" style="overflow:hidden;background-color:rgb(255,255,224)">
    <section class="demonstration">
                        

                        <div class="search-results hidden">
                            
                            <div class="search-results-repeater">
                                <div class="search-result template">
                                
                                    <div class="search-result-row">
                                        <div class="search-result-title"><h4><a></a></h4></div>
                                        <div class="search-result-description"></div>
                                        <div class="search-result-displayurl"><a></a></div>
                                        <hr />
                                    </div>
                                </div>
                            </div>
                            <div class="search-results-footer">
                               

                                <div class="pagination pagination-centered">
                                    
                                </div>
                            </div>
                        </div>

                       
                    </section>
    </div>
<!-- large-10 small-10 medium-10 large-offset-1 columns -->
		<div class="col-lg-3 resultContainer" height="400" style="color:rgb(0, 140, 186);overflow:hidden;background-color: rbg(224,255,255)">
 
    </div>
    <div class="col-lg-3 resultContainer2" height="400" style="color:rgb(0, 140, 186);overflow:hidden;background-color:rgb(255,255,224)">
 
    </div>
    <div class="col-lg-3 resultContainer1"" height="400" style="color:rgb(0, 140, 186);overflow:hidden;background-color:rbg(224,255,255)">
    <!-- <div id="searchcontrol">Google Search</div> -->
   </div> 
    
  </div>
    
	
    
	  <script src="js/vendor/jquery.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="js/foundation.min.js"></script>
    <script src="js/foundation/foundation.reveal.js"></script>
    <script src="js/underscore-min.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js1/search.js"></script>
	<script src="js1/jquery.bingsearch-min.js"></script>
	<script src="js1/jquery.base64.js"></script>
	<script src="js1/bootstrap.min.js"></script>
    <script id="doc_template" type="text/template">
    <article class=docBox>
		<hr>
        <a href=<%= docURL %> id=<%= docURL %> class="postLink"><h2 class="title"><%= doctitle %></h2></a>
        <section class="render" style="color:#000;">
            <%= docBody %>
        </section>
        <a href=<%= docURL %> id=<%= docURL %> class="postLink" style="font-size:0.8rem;"><%= docURL %></a>
    </article>
    </script>
	<script>
		 $(document).foundation();
	</script>
	<script>

  var search = function(keyword, compiled) {

    console.log("Search term: " + keyword);
    var pagerank = false;//$('input[name="pagerank"]:checked').val();
    $.get('http://localhost:3000/search?query='+ keyword + '&pagerank=' + pagerank , function(data) {
      if(data.error){
        console.log(error);
      }
      else{
        $('.resultContainer').empty();
        $.each(data, function(index, data) {
          var el = compiled({
              docURL: data.url,
              doctitle: data.title,
              docBody: data.data + " ..."
          });
          $(el).prependTo('.resultContainer');
        });
      }
    });
    
    var pagerank = true;//$('input[name="pagerank"]:checked').val();
    $.get('http://localhost:3000/search?query='+ keyword + '&pagerank=' + pagerank , function(data) {
      if(data.error){
        console.log(error);
      }
      else{
        $('.resultContainer2').empty();
        $.each(data, function(index, data) {
          var el = compiled({
              docURL: data.url,
              doctitle: data.title,
              docBody: data.data + " ..."
          });
          $(el).prependTo('.resultContainer2');
        });
      }
    });
    
    //Clustering
    //var pagerank = $('input[name="pagerank"]:checked').val();
    $.get('http://localhost:3001/cluster?query='+ keyword, function(data) {
      if(data.error){
        console.log(error);
      }
      else{
        $('.resultContainer1').empty();
        $.each(data, function(index, data) {
          var el = compiled({
              docURL: data.url,
              doctitle: data.title,
              docBody: ""
          });
          $(el).prependTo('.resultContainer1');
        });
      }
    });
    
  };

	(function() {
    //Compiling the Underscore Template
    var templateComment = $('#doc_template').html();
    var compiled = _.template(templateComment);

    //Event being called on typing something in the input box
    $("#textSearch").on('keypress', function(e){
        if (e.which == 13) {
          var keyword = ($('input[name="query"]').val()).trim();
          if(keyword != ""){
            search(keyword, compiled);
          }
        } else
        {
          $("#textSearch").autocomplete({
            source: function (request, response) {
              $.get('http://localhost:3000/search/autocomplete?query='+request.term , function(data) {
            		response(data);
            	});
            },
            select: function(event, ui) {
              search(ui.item.value, compiled);
            }
          });
       }
    });
  })();
</script>

</body>

</html>

<html>

<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Search Engine</title>
<link rel="stylesheet" href="css/normalize.css" />
<link rel="stylesheet" href="css/foundation.min.css" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Roboto:400,500'
	rel='stylesheet' type='text/css' />
<link rel="stylesheet"
	href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#tab2").hide();
    $("#tab1").show();

	
    $("#tab1link").click(function(){
        $("#tab2").hide();
        $("#tab1").show();
    });
    $("#tab2link").click(function(){
    	$("#tab1").hide();
        $("#tab2").show();
    });
});
</script>

</head>

<style>
html, body {
	width: 100%;
	height: 100%;
	margin: 0px;
	padding: 0px;
	overflow-x: hidden;
}

.container-fluid {
	padding-right: 15px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: auto;
}

.nav, nav-tabs {
	padding-left: 0;
	margin-bottom: 0;
	list-style: none;
	list-style-type: none;
	list-style-position: initial;
	list-style-image: initial;
}

body {
	background-image: url("img/images2.jpg");
	
	background-repeat: no-repeat;
	background-size: 500px 400px;
	background-attachment: fixed;
	background-position: 50% 90%;
	color: #242628;
	font-family: 'Roboto', sans-serif;
}

.main {
	margin: 1vh auto;
}

.search {
	background-color: #FFF;
	font-family: 'Inconsolata', sans-serif;
	border-bottom: 1px solid #242628;
}

#textSearch {
	border: 0;
	margin: 0;
	font-size: 2.4em;
	font-weight: bold;
	height: auto;
	box-shadow: none;
}

#textSearch:focus {
	background-color: #FFF;
}

.searchbox {
	height: 60px;
	background-color: white;
}

.postBox {
	border-bottom: #d0e2ea 1px dashed;
	margin-top: 0.5rem;
	padding-bottom: 10px;
}

.resultContainer {
	margin-top: 1rem;
	padding-bottom: 10px 10px;
}

.title {
	font-size: 2.5rem;
	line-height: 1.2em;
	letter-spacing: -1px;
	text-indent: -2px;
	font-weight: bold;
	padding-top: 0;
	margin: 0px 0px;
	border: none;
}

.title:hover {
	color: #3498db;
}

.meta {
	color: #9EABB3;
	font-size: 1rem;
	margin: 0px 0px;
}

a.userEmail {
	color: inherit;
	text-decoration: none;
}

a.userEmail:hover {
	text-decoration: underline;
}
</style>

<body>

	<nav class="top-bar" style="background-color: rgba(73, 174, 197, 0.92)">
		<!-- <ul class="title-area">
            <li class="name"> -->
		<h1>
			<div>
				<!--<img src="img/image1.jpg" width="100%" style=""> -->
			</div>
		</h1>
		<!--   </li> -->
		<!--  <li class="toggle-topbar menu-icon">
                <a href="#">
                    <span>Menu</span>
                </a>
            </li> 
		-->
		</ul>

	</nav>
    <input type="hidden" id="appKey" value="ZMJgaJl3wg/xYkiNOnC7kU+z901fw/q76sptaiPdVEU" />
	<div class="row main clearfix">
		<div class="searchbox columns large-1 show-for-large-up">
			<img class="my img" src="img/search-128.png" alt="" />
		</div>
		<div class="search columns large-11 small-12 medium-12">
			<input type="text" id="textSearch" name="query"
				style="font-family: Monotype Corsiva;"
				placeholder="Start your  Search for Electronics!" />
		</div>
	</div>
	<br>

	<div class="row clearfix">
		<div class="columns large-5 large-offset-1">
			<center>
				<input type="radio" name="pagerank" value="true" checked>
				Page rank &nbsp;&nbsp;&nbsp;&nbsp; 
				<input type="radio"	name="pagerank" value="false"> Index
				&nbsp;&nbsp&nbsp;&nbsp; 
				<input type="radio" name="bing"	value="false"> Bing Results &nbsp;&nbsp; 
				<input	type="radio" name="google" value="false"> Google Results
				&nbsp;&nbsp;
			</center>
		</div>
		
		<div class="container-fluid">
			<ul class="nav nav-tabs">
				<!--  <li  class="active"><a id="tab1link" href="#">Tab 1</a></li>
    <li><a id="tab2link" href="#">Tab 2</a></li>  -->
			</ul>
			<div id="tab1">
			<!-- 	<iframe src="tabpage1.jsp"> Tab 1</iframe>
			</div>
			<div id="tab2">
				<iframe src="tabpage2.jsp"> Tab 2 </iframe>
			</div> -->
			<br>
		</div>
	</div>
	<div class="row clearfix">
		<div
			class="resultContainer large-10 small-10 medium-10 large-offset-1 columns">

		</div>
	</div>

	<script src="js/vendor/jquery.js"></script>
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script src="js/foundation.min.js"></script>
	<script src="js/foundation/foundation.reveal.js"></script>
	<script src="js/underscore-min.js"></script>
	<script src="js/moment.min.js"></script>
	<script src="js/search.js"></script>
	<script src="js/jquery.bingsearch-min.js"></script>
	<script src="js/jquery.base64.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script id="doc_template" type="text/template">
    <article class=docBox>
        <a href=<%= docURL %> id=<%= docURL %> class="postLink"><h2 class="title"><%=  %></h2></a>
        <section class="render">
            <%=  %>
        </section>
    </article>
    </script>
	<script>
		 $(document).foundation();
	</script>
	<script>

  var search = function(keyword, compiled) {

    console.log("Search term: " + keyword);

    var pagerank = $('input[name="pagerank"]:checked').val();
    $.get('http://localhost:3000/search?query='+ keyword + '&pagerank=' + pagerank , function(data) {
      if(data.error){
        console.log(error);
      }
      else{
        $('.resultContainer').empty();
        $.each(data, function(index, data) {
          var el = compiled({
              docURL: data.url,
              doctitle: data.title,
              docBody: data.data + " ..."
          });
          $(el).prependTo('.resultContainer');
        });
      }
    });
    doSearch(keyword); 
  };

	(function() {
    //Compiling the Underscore Template
    //var templateComment = $('#doc_template').html();
    //var compiled = _.template(templateComment);

    //Event being called on typing something in the input box
    $("#textSearch").on('keypress', function(e){
        if (e.which == 13) {
          var keyword = ($('input[name="query"]').val()).trim();
          if(keyword != ""){
            search(keyword, compiled);
          }
        } else {
          $("#textSearch").autocomplete({
            source: function (request, response) {
              $.get('http://localhost:3000/search/autocomplete?query='+request.term , function(data) {
            		response(data);
            	});
            },
            select: function(event, ui) {
              search(ui.item.value, compiled);
            }
          });
       }
    });
  })();
</script>

</body>

</html>
